$(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("body").on("click",'[data-toggle="lightbox"]',function(e){e.preventDefault(),$(this).ekkoLightbox()}),$(".open_filter").on("click",function(e){e.preventDefault(),box=$(".form_advanced"),button=$(this),"none"!==box.css("display")?button.text("Filtro Avançado ↓"):button.text("✗ Fechar"),box.slideToggle()}),$("body").on("change",'select[name*="filter_"]',function(){const e=$(this),t=$(this).data("index")+1;$.post(e.data("action"),{search:e.val()},function(e){!0===e.status?($('select[data-index="'+t+'"]').empty(),e.data.map(function(e){$('select[data-index="'+t+'"]').append($("<option>",{value:e,text:e}))}),$.each($('select[name*="filter_"]'),function(e,t){$(t).data("index")>e+1&&$('select[data-index="'+e+'"]').empty().append($("<option>",{value:"",text:"Escolha..."}))})):$.each($('select[name*="filter_"]'),function(e,n){$(n).data("index")>=t&&$(n).empty().append($("<option>",{text:"Selecione uma opção no filtro anterior."}))}),$('select[name*="filter_"].selectpicker').selectpicker("refresh")},"json")}),delete $.ajaxSettings.headers["X-CSRF-TOKEN"]});
